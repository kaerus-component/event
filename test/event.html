<!doctype html>
<html>
	<meta charset="utf-8"/>
	<head><title>Event tests</title></head>
	<script src="../build/build.js"></script>
<body>
<h1 id='header'>Event tests</h1>
<div id='content'>
	<ul>
		<li>item1</li>
		<li>item2</li>
	</ul>
	<form name="testform" action="#">
		<p><input type="text" name="email" placeholder="email"/></p>
		<p><input type="textarea" name="message" rows="2" cols="40" placeholder="message"/></p>
		<p><button type="submit">Submit</button></p>
	</form>
	<details>
		<summary>More details</summary>
		<ul>
			<li>test1</li>
			<li>test2</li>
		</ul>
	</detail>
</div>

	<script>
		Event = require('event');

		Event.debug(true);

		var header = document.getElementById('header');

		Event.bind(window,'load',function(){
			Event.delegate(header,'click',clickedHeader);
		});

		function clickedHeader(event){
			console.log("%s<%s>:",Event.path(this), event.type, this.innerHTML);
			//Event.delegate(document,'click');
		}

		Event.bind(document,'change',function(event){
			console.log("%s<%s>:",Event.path(this), event.type, this.value);
		});

		Event.bind(document.querySelector('form'),'submit',{
			validate: {
				email: 'test@test.com'
			},
			listener:submitted
		});
		
		function submitted(event){
			console.log("submitted", this);
			event.preventDefault();
			event.stopPropagation();
				
			if(this.email.value === event.validate.email){
				console.log("Correct email!");
			} else {
				console.log("wrong email!");
			} 
		}

	</script>
</body>
</html>